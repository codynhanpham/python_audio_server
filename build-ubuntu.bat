@REM Create a temporary container to build the project
@REM Using the trusty-python37 image, and the git repo github.com/codynhanpham/python_audio_server

@REM Use this command to build the project with SimpleAudio and FFmpeg
docker run --name python37-audio-server-build-temp -it -v "%cd%:/app" trusty-python37 /bin/sh -c "cd /app && python3.7 -m venv linux-venv && . linux-venv/bin/activate && pip3 install numba==0.49.1 llvmlite==0.32.1 resampy==0.3.1 librosa==0.8.1 soxr && pip3 install -U numpy simpleaudio argparse pydub flask waitress python-dotenv scipy && pip3 install pyinstaller==5.13.2 && pip3 freeze > requirements_linux.txt && pyinstaller -F --name py_audio_server --add-binary=\"bin/ffmpeg:bin\" --add-binary=\"bin/ffprobe:bin\" --add-binary=\"bin/async_get.exe:bin\" --hidden-import=\"scipy.special.cython_special\" --hidden-import=\"sklearn.utils._typedefs\" main.py" && docker rm python37-audio-server-build-temp